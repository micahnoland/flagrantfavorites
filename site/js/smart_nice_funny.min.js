var favteam,favplayer,favteamPick,favplayerPick,teams=[{name:"San Antonio Spurs",code:"SAS",funny:!1,shortName:"spurs"},{name:"Boston Celtics",code:"BOS",funny:!1,shortName:"celtics"},{name:"Brooklyn Nets",code:"BKN",funny:!0,shortName:"nets"},{name:"New York Knicks",code:"NYK",funny:!1,shortName:"knicks"},{name:"Philadelphia 76ers",code:"PHI",funny:!0,shortName:"sixers"},{name:"Toronto Raptors",code:"TOR",funny:!0,shortName:"raptors"},{name:"Chicago Bulls",code:"CHI",funny:!1,shortName:"bulls"},{name:"Cleveland Cavaliers",code:"CLE",funny:!0,shortName:"cavaliers"},{name:"Detroit Pistons",code:"DET",funny:!0,shortName:"pistons"},{name:"Indiana Pacers",code:"IND",funny:!0,shortName:"pacers"},{name:"Milwaukee Bucks",code:"MIL",funny:!0,shortName:"bucks"},{name:"Atlanta Hawks",code:"ATL",funny:!0,shortName:"hawks"},{name:"Charlotte Hornets",code:"CHA",funny:!0,shortName:"hornets"},{name:"Miami Heat",code:"MIA",funny:!0,shortName:"heat"},{name:"Orlando Magic",code:"ORL",funny:!0,shortName:"magic"},{name:"Washington Wizards",code:"WAS",funny:!0,shortName:"wizards"},{name:"Denver Nuggets",code:"DEN",funny:!0,shortName:"nuggets"},{name:"Minnesota Timberwolves",code:"MIN",funny:!0,shortName:"timberwolves"},{name:"Oklahoma City Thunder",code:"OKC",funny:!1,shortName:"thunder"},{name:"Portland Trail Blazers",code:"POR",funny:!0,shortName:"blazers"},{name:"Utah Jazz",code:"UTA",funny:!0,shortName:"jazz"},{name:"Golden State Warriors",code:"GSW",funny:!1,shortName:"warriors"},{name:"Los Angeles Clippers",code:"LAC",funny:!1,shortName:"clippers"},{name:"Los Angeles Lakers",code:"LAL",funny:!1,shortName:"lakers"},{name:"Phoenix Suns",code:"PHX",funny:!0,shortName:"suns"},{name:"Sacramento Kings",code:"SAC",funny:!0,shortName:"kings"},{name:"Dallas Mavericks",code:"DAL",funny:!0,shortName:"mavericks"},{name:"Houston Rockets",code:"HOU",funny:!0,shortName:"rockets"},{name:"Memphis Grizzlies",code:"MEM",funny:!0,shortName:"grizzlies"},{name:"New Orleans Pelicans",code:"NOP",funny:!0,shortName:"pelicans"}],onlyFunnyPlayersSorry={"DeAndre Jordan":!1,"Klay Thompson":!1,"Kyrie Irving":!1,"Jonathan Issac":!1,"Taurean Prince":!1,"Trae Young":!1,"Jaylen Brown":!1,"Jayson Tatum":!1,"Rondae Hollis-Jefferson":!1,"Caris LeVert":!1,"Kemba Walker":!1,"Miles Bridges":!1,"Lauri Markkanen":!1,"Wendell Carter Jr.":!1,"Kevin Love":!1,"Collin Sexton":!1,"Dennis Smith Jr.":!1,"Luka Doncic":!1,"Jamal Murray":!1,"Nikola Jokic":!1,"Andre Drummond":!1,"Blake Griffin":!1,"Stephen Curry":!1,"Kevin Durant":!1,"James Harden":!1,"Chris Paul":!1,"Myles Turner":!1,"Victor Oladipo":!1,"Myles Turner":!1,"Tobias Harris":!1,"Shai Gilgeous-Alexander":!1,"Brandon Ingram":!1,"LeBron James":!1,"Marc Gasol":!1,"Jaren Jackson Jr.":!1,"Justise Winslow":!1,"Bam Adebayo":!1,"Giannis Antetokounmpo":!1,"Khris Middleton":!1,"Karl-Anthony Towns":!1,"Jimmy Butler":!1,"Anthony Davis":!1,"Julius Randle":!1,"Kristaps Porzingis":!1,"Kevin Knox":!1,"Russell Westbrook":!1,"Paul George":!1,"Mohamed Bamba":!1,"Aaron Gordon":!1,"Joel Embiid":!1,"Ben Simmons":!1,"Deandre Ayton":!1,"Devin Booker":!1,"Damian Lillard":!1,"CJ McCollum":!1,"De'Aaron Fox":!1,"Marvin Bagley III":!1,"LaMarcus Aldridge":!1,"DeMar DeRozan":!1,"Kawhi Leonard":!1,"OG Anunoby":!1,"Rudy Gobert":!1,"Donovan Mitchell":!1,"John Wall":!1,"Bradley Beal":!1},allPlayers=[];const playerPicPrefix="https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/";function roll(){favplayer.prev(),Promise.all([rollTeam(),rollPlayer()]).then(()=>{updateTweetButton(favteamPick.name,favplayerPick[2])})}function rollTeam(){return new Promise(e=>{favteam.shuffle(5,function(){setFavTeamText(favteamPick),e()})})}function rollPlayer(){return new Promise(e=>{setTimeout(()=>favplayer.shuffle(5,function(){setFavPlayerText(favplayerPick),e()}),500)})}function clearFavTexts(){$("#favteamname").fadeOut("fast",function(){$(this).empty()}),$("#favplayername").fadeOut("fast",function(){$(this).empty()}),$("#tweet").fadeOut("fast",function(){$(this).empty()})}function setFavTeamText(e){var a=$("<a>",{text:"The "+e.name+"!",href:"http://www.nba.com/teams/"+e.shortName});const n=$("#favteamname");n.append(a),n.fadeIn(500)}function setFavPlayerText(e){var a=$("<a>",{text:e[2]+"!",href:"https://stats.nba.com/player/"+e[0]});const n=$("#favplayername");n.append(a),n.fadeIn(500)}function loadTeamImages(){return new Promise(e=>{teams.forEach(function(e){$("#favteam").append($("<img>",{class:"team",src:"https://www.nba.com/assets/logos/teams/secondary/web/"+e.code+".svg#"+e.code+"(viewBox(0, 0, 250, 250))"}))}),e()})}function loadPlayers(){return new Promise(e=>{fetchPlayers().done(handlePlayers).then(e)})}function getRandomSubarray(e,a){return new Promise(n=>{for(var t,r,o=e.slice(0),s=e.length;s--;)t=o[r=Math.floor((s+1)*Math.random())],o[r]=o[s],o[s]=t;n(o.slice(0,a))})}function pickTeam(){for(var e=getRandomTeamIndex();!1===teams[e].funny;)e=getRandomTeamIndex();return favteamPick=teams[e],e+1}function getRandomTeamIndex(){return Math.floor(Math.random()*teams.length)}function pickPlayer(){return new Promise(e=>{for(var a=getRandomPlayer();!1===onlyFunnyPlayersSorry[a[2]];)a=getRandomPlayer();var n=getRandomPlayer();$(".slotMachineContainer .player:nth-child(3)").attr("src",playerPicPrefix+a[0]+".png"),$(".slotMachineContainer .player:nth-child(6)").attr("src",playerPicPrefix+n[0]+".png"),favplayerPick=a,e()})}function getRandomPlayer(){return allPlayers[Math.floor(Math.random()*allPlayers.length)]}function fetchPlayers(){var e=new Date,a=e.getFullYear(),n=e.getMonth(),t=new Date((new Date).setFullYear(e.getFullYear()+1)).getFullYear().toString().substr(-2);n>=0&&n<=9&&(a-=1,t-=1);var r="https://stats.nba.com/stats/commonallplayers?LeagueID=00&IsOnlyCurrentSeason=1&Season="+a+"-"+t;return $.ajax({url:r,type:"GET",dataType:"jsonp"})}function handlePlayers(e){return new Promise(a=>{e.resultSets.forEach(e=>{e.rowSet.forEach(e=>{allPlayers.push(e)})}),getRandomSubarray(allPlayers,30).then(loadCandidates).then(a)})}function loadCandidates(e){return new Promise(a=>{e.forEach(e=>{const a=playerPicPrefix+e[0]+".png";$("#favplayer").append($("<img>",{class:"player",src:a,onerror:'this.onerror=null;this.src="img/notfound.png";'}))}),a()})}function updateTweetButton(e,a){var n=$("<a>",{href:"https://twitter.com/intent/tweet?text="+("My new favorite NBA team is The "+e+" and my new favorite player is "+a+"! ")+"&url=https://flagrantfavorites.com&hashtags=TheFlagrantOnes",class:"btn btn-twitter twitter-share-button"}).text(" Tweet your new favorite team and player!"),t=$("<i>",{class:"fa fa-twitter"});n.prepend(t),n.attr("data-show-count","false"),n.attr("data-size","large"),$("#tweet").append(n),$("#tweet").fadeIn()}$(document).ready(function(){$("#loading").hide();const e=loadTeamImages().then(()=>{favteam=$("#favteam").slotMachine({active:0,randomize:()=>pickTeam()})}),a=loadPlayers().then(()=>{favplayer=$("#favplayer").slotMachine({active:0,randomize:()=>1})});Promise.all([e,a]).then(()=>{$("#letsgo").on("click",function(e){clearFavTexts(),pickPlayer().then(()=>{roll(),e.preventDefault()})})})});